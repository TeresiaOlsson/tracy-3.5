TITLE,‚Deltaoptik‘;

BEAM,PARTICLE=ELECTRON,PC=1.5,RADIATE=FALSE;

/*Quadrupoles18-21areasofnownotbeingused:*/
QQ1:QUADRUPOLE,THICK=TRUE,L=0.2175,K1=1.7268;/*Themodelstartsinthemiddleofthefirstquadrupoleafterthecavity.Itwaseasiertocompareittotheoldmodelsthatway.*/
QQ2:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.82780;
QQ3:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.43906;
QQ4:QUADRUPOLE,THICK=TRUE,L=0.435,K1=2.880125;
QQ5:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.31780;
QQ6:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ7:QUADRUPOLE,THICK=TRUE,L=0.435,K1=3.835739;
QQ8:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ9:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ10:QUADRUPOLE,THICK=TRUE,L=0.435,K1=3.83573;
QQ11:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.4243;
QQ12:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.52147;
QQ13:QUADRUPOLE,THICK=TRUE,L=0.435,K1=2.75563;
QQ14:QUADRUPOLE,THICK=TRUE,L=0.235,K1=0.21417;
QQ15:QUADRUPOLE,THICK=TRUE,L=0.235,K1=0.50445;
QQ16:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.605665;
QQ17:QUADRUPOLE,THICK=TRUE,L=0.235,K1=2.70212;
QQ22:QUADRUPOLE,THICK=TRUE,L=0.235,K1=2.70212;
QQ23:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.605665;
QQ24:QUADRUPOLE,THICK=TRUE,L=0.235,K1=0.50445;
QQ25:QUADRUPOLE,THICK=TRUE,L=0.235,K1=0.214173;
QQ26:QUADRUPOLE,THICK=TRUE,L=0.435,K1=2.755639;
QQ27:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.521478;
QQ28:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ29:QUADRUPOLE,THICK=TRUE,L=0.435,K1=3.835739;
QQ30:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ31:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ32:QUADRUPOLE,THICK=TRUE,L=0.435,K1=3.835739;
QQ33:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ34:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.31780;
QQ35:QUADRUPOLE,THICK=TRUE,L=0.435,K1=2.880125;
QQ36:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.439061;
QQ37:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.827804;
QQ38:QUADRUPOLE,THICK=TRUE,L=0.435,K1=1.91750;
QQ40:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.827804;
QQ41:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.439061;
QQ42:QUADRUPOLE,THICK=TRUE,L=0.435,K1=2.880125;
QQ43:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.31780;
QQ44:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ45:QUADRUPOLE,THICK=TRUE,L=0.435,K1=3.835739;
QQ46:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ47:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ48:QUADRUPOLE,THICK=TRUE,L=0.435,K1=3.835739;
QQ49:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ50:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.389007;
QQ51:QUADRUPOLE,THICK=TRUE,L=0.435,K1=2.931214;
QQ52:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.686768;
QQ53:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.441484;
QQ54:QUADRUPOLE,THICK=TRUE,L=0.235,K1=1.915117;
QQ55:QUADRUPOLE,THICK=TRUE,L=0.235,K1=1.946584;
QQ56:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.193575;
QQ57:QUADRUPOLE,THICK=TRUE,L=0.235,K1=2.986112;
QQ58:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.313881;
QQ59:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.313881;
QQ60:QUADRUPOLE,THICK=TRUE,L=0.235,K1=2.986112;
QQ61:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.193575;
QQ62:QUADRUPOLE,THICK=TRUE,L=0.235,K1=1.946584;
QQ63:QUADRUPOLE,THICK=TRUE,L=0.235,K1=1.915117;
QQ64:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.441484;
QQ65:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.686768;
QQ66:QUADRUPOLE,THICK=TRUE,L=0.435,K1=2.931214;
QQ67:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.389007;
QQ68:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ69:QUADRUPOLE,THICK=TRUE,L=0.435,K1=3.835739;
QQ70:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ71:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ72:QUADRUPOLE,THICK=TRUE,L=0.435,K1=3.835739;
QQ73:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.42434;
QQ74:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-2.31780;
QQ75:QUADRUPOLE,THICK=TRUE,L=0.435,K1=2.880125;
QQ76:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.439061;
QQ77:QUADRUPOLE,THICK=TRUE,L=0.235,K1=-1.827804;
BPM:MARKER;
BEND1:RBEND,THICK=TRUE,L=1.102,ANGLE=0.3490658,HGAP=0.0504,FINT=1/6,FINTX=1/6;
BEND3:RBEND,THICK=TRUE,L=0.5251,ANGLE=0.1221731,HGAP=0.0504,FINT=1/6,FINTX=1/6;
BEND4:RBEND,THICK=TRUE,L=0.5251,ANGLE=0.0523600,HGAP=0.0504,FINT=1/6,FINTX=1/6;

BL:SEQUENCE,REFER=CENTRE,L=115.16199;
QQ1,AT=0.10875;
BPM01:BPM,AT=0.2380;
QQ2,AT=1.780061;
BPM02:BPM,AT=1.918061;
BEND1,AT=2.723960;
BPM03:BPM,AT=3.529722;
QQ3,AT=3.667722;
QQ4,AT=4.951089;
QQ5,AT=5.6800;
BPM04:BPM,AT=5.818;
BEND1,AT=6.622340;
BPM05:BPM,AT=7.4277;
QQ6,AT=7.565700;
QQ7,AT=8.293619;
QQ8,AT=9.023299;
BPM06:BPM,AT=9.161299;
BEND1,AT=9.971507;
BPM07:BPM,AT=10.777276;
QQ9,AT=10.915276;
QQ10,AT=11.644706;
QQ11,AT=12.374026;
BPM08:BPM,AT=12.512026;
BEND1,AT=13.320388;
BPM09:BPM,AT=14.12428;
QQ12,AT=14.262280;
QQ13,AT=14.844369;
BPM10:BPM,AT=15.705952;
QQ14,AT=15.843952;
BEND3,AT=17.130637;
BPM11:BPM,AT=17.678022;
QQ15,AT=17.816022;
QQ16,AT=19.713796;
BPM13:BPM,AT=20.677153;
QQ17,AT=20.815153;
BEND4,AT=25.303936;
BPM14:BPM,AT=26.1986;
BPM15:BPM,AT=31.384;
BEND4,AT=32.277059;
QQ22,AT=36.767553;
BPM16:BPM,AT=36.905553;
QQ23,AT=37.868319;
BPM17:BPM,AT=38.006319;
QQ24,AT=39.767092;
BPM18:BPM,AT=39.905092;
BEND3,AT=40.450358;
QQ25,AT=41.742580;
BPM19:BPM,AT=41.88058;
QQ26,AT=42.741572;
QQ27,AT=43.322886;
BPM20:BPM,AT=43.460886;
BEND1,AT=44.260607;
BPM21:BPM,AT=45.071051;
QQ28,AT=45.209051;
QQ29,AT=45.937824;
QQ30,AT=46.669945;
BPM22:BPM,AT=46.807945;
BEND1,AT=47.609488;
BPM23:BPM,AT=48.421492;
QQ31,AT=48.559492;
QQ32,AT=49.286664;
QQ33,AT=50.018536;
BPM24:BPM,AT=50.156536;
BEND1,AT=50.958655;
BPM25:BPM,AT=51.76915;
QQ34,AT=51.907150;
QQ35,AT=52.635177;
QQ36,AT=53.914321;
BPM26:BPM,AT=54.052321;
BEND1,AT=54.857035;
BPM27:BPM,AT=55.662485;
QQ37,AT=55.800485;
QQ38,AT=57.580292;
BPM28:BPM,AT=57.818292;
QQ40,AT=59.361017;
BPM29:BPM,AT=59.499017;
BEND1,AT=60.304955;
BPM30:BPM,AT=61.110428;
QQ41,AT=61.248428;
QQ42,AT=62.527694;
QQ43,AT=63.257627;
BPM31:BPM,AT=63.395627;
BEND1,AT=64.203335;
BPM32:BPM,AT=65.009088;
QQ44,AT=65.147088;
QQ45,AT=65.875121;
QQ46,AT=66.605631;
BPM33:BPM,AT=66.743631;
BEND1,AT=67.552502;
BPM34:BPM,AT=68.355643;
QQ47,AT=68.493643;
QQ48,AT=69.222212;
QQ49,AT=69.954114;
BPM35:BPM,AT=70.092114;
BEND1,AT=70.901383;
BPM36:BPM,AT=71.703534;
QQ50,AT=71.841534;
QQ51,AT=72.420433;
BPM37:BPM,AT=73.254069;
QQ52,AT=73.392069;
BEND3,AT=74.711632;
QQ53,AT=75.460594;
QQ54,AT=76.095555;
QQ55,AT=77.292870;
BPM38:BPM,AT=77.43087;
BPM39:BPM,AT=78.257549;
QQ56,AT=78.395549;
BPM40:BPM,AT=79.344;
BPM41:BPM,AT=82.28;
BEND4,AT=82.884931;
QQ57,AT=83.596733;
QQ58,AT=84.374848;
BPM42:BPM,AT=88.242254;
QQ59,AT=88.380254;
BPM43:BPM,AT=89.006653;
QQ60,AT=89.144653;
BEND4,AT=89.858054;
BPM44:BPM,AT=94.209525;
QQ61,AT=94.347525;
QQ62,AT=95.446603;
BPM45:BPM,AT=95.584603;
QQ63,AT=96.648590;
QQ64,AT=97.346540;
BEND3,AT=98.031353;
QQ65,AT=99.319079;
BPM46:BPM,AT=99.457079;
QQ66,AT=100.318052;
QQ67,AT=100.899916;
BPM47:BPM,AT=101.037916;
BEND1,AT=101.841602;
BPM48:BPM,AT=102.650406;
QQ68,AT=102.788406;
QQ69,AT=103.515592;
QQ70,AT=104.246714;
BPM49:BPM,AT=104.384714;
BEND1,AT=105.190483;
BPM50:BPM,AT=105.99701;
QQ71,AT=106.135010;
QQ72,AT=106.865232;
QQ73,AT=107.594489;
BPM51:BPM,AT=107.732489;
BEND1,AT=108.539650;
BPM52:BPM,AT=109.347725;
QQ74,AT=109.485725;
QQ75,AT=110.216596;
QQ76,AT=111.497085;
BPM53:BPM,AT=111.635085;
BEND1,AT=112.438030;
BPM54:BPM,AT=113.242876;
QQ77,AT=113.380876;
QQ1,AT=115.05324;
ENDSEQUENCE;


USE,SEQUENCE=BL;
!TWISS,SAVE;
!PLOT,COLOUR=100,VAXIS=BETX,BETY,HAXIS=S,INTERPOLATE=TRUE;
!READMYTABLE,FILE=error_table.txt,table=errortab;
!SETERR,table=errortab;
TWISS,SAVE;
!PLOT,COLOUR=100,VAXIS=BETX,BETY,HAXIS=S,INTERPOLATE=TRUE;
MATCH,SEQUENCE=bl;
CONSTRAINT,RANGE=BPM01,BETX=11.18259499,BETY=0.86026977;
CONSTRAINT,RANGE=BPM02,BETX=1.58519382,BETY=11.480846;
CONSTRAINT,RANGE=BPM03,BETX=2.37845226,BETY=12.57144533;
CONSTRAINT,RANGE=BPM04,BETX=1.81994975,BETY=11.95037013;
CONSTRAINT,RANGE=BPM05,BETX=2.00447288,BETY=9.78184287;
CONSTRAINT,RANGE=BPM06,BETX=1.67500932,BETY=8.81040259;
CONSTRAINT,RANGE=BPM07,BETX=3.26924426,BETY=8.30598752;
CONSTRAINT,RANGE=BPM08,BETX=1.96975091,BETY=5.90283897;
CONSTRAINT,RANGE=BPM09,BETX=4.08980344,BETY=5.9979447;
CONSTRAINT,RANGE=BPM10,BETX=10.27377008,BETY=5.73852129;
CONSTRAINT,RANGE=BPM11,BETX=0.64628073,BETY=22.87626695;
CONSTRAINT,RANGE=BPM13,BETX=31.65880017,BETY=19.06555199;
CONSTRAINT,RANGE=BPM14,BETX=5.70860299,BETY=9.04534434;
CONSTRAINT,RANGE=BPM15,BETX=5.86485394,BETY=6.9960626;
CONSTRAINT,RANGE=BPM16,BETX=34.29331258,BETY=18.92419215;
CONSTRAINT,RANGE=BPM17,BETX=7.01694973,BETY=47.71131324;
CONSTRAINT,RANGE=BPM18,BETX=0.64081224,BETY=22.1379934;
CONSTRAINT,RANGE=BPM19,BETX=11.23083318,BETY=6.31166601;
CONSTRAINT,RANGE=BPM20,BETX=4.68261825,BETY=8.28230687;
CONSTRAINT,RANGE=BPM21,BETX=2.22072238,BETY=8.06930812;
CONSTRAINT,RANGE=BPM22,BETX=2.99698856,BETY=8.15211777;
CONSTRAINT,RANGE=BPM23,BETX=1.66677394,BETY=8.42227977;
CONSTRAINT,RANGE=BPM24,BETX=1.70878579,BETY=7.72009605;
CONSTRAINT,RANGE=BPM25,BETX=1.7912208,BETY=9.79317276;
CONSTRAINT,RANGE=BPM26,BETX=2.38883541,BETY=9.68573029;
CONSTRAINT,RANGE=BPM27,BETX=1.39971835,BETY=8.40413846;
CONSTRAINT,RANGE=BPM28,BETX=8.67145067,BETY=0.81202999;
CONSTRAINT,RANGE=BPM29,BETX=1.0596404,BETY=8.21756079;
CONSTRAINT,RANGE=BPM30,BETX=2.6183475,BETY=9.0986081;
CONSTRAINT,RANGE=BPM31,BETX=2.49936306,BETY=9.03568006;
CONSTRAINT,RANGE=BPM32,BETX=1.92470501,BETY=10.07139543;
CONSTRAINT,RANGE=BPM33,BETX=1.81931811,BETY=8.23479953;
CONSTRAINT,RANGE=BPM34,BETX=2.44242102,BETY=8.10849095;
CONSTRAINT,RANGE=BPM35,BETX=1.77380572,BETY=8.43265839;
CONSTRAINT,RANGE=BPM36,BETX=3.15220961,BETY=8.11630233;
CONSTRAINT,RANGE=BPM37,BETX=4.28119954,BETY=18.0995233;
CONSTRAINT,RANGE=BPM38,BETX=5.81354188,BETY=6.2202699;
CONSTRAINT,RANGE=BPM39,BETX=3.98933856,BETY=7.22899459;
CONSTRAINT,RANGE=BPM40,BETX=10.7419059,BETY=3.87187122;
CONSTRAINT,RANGE=BPM41,BETX=25.3853161,BETY=2.86540429;
CONSTRAINT,RANGE=BPM42,BETX=4.27761134,BETY=16.90960034;
CONSTRAINT,RANGE=BPM43,BETX=11.55554815,BETY=7.2248391;
CONSTRAINT,RANGE=BPM44,BETX=3.36821078,BETY=5.54293962;
CONSTRAINT,RANGE=BPM45,BETX=4.71773819,BETY=4.09044849;
CONSTRAINT,RANGE=BPM46,BETX=4.36195366,BETY=13.91770067;
CONSTRAINT,RANGE=BPM47,BETX=3.4419637,BETY=6.91766259;
CONSTRAINT,RANGE=BPM48,BETX=1.88046069,BETY=7.09616476;
CONSTRAINT,RANGE=BPM49,BETX=2.28062152,BETY=8.37722068;
CONSTRAINT,RANGE=BPM50,BETX=1.77879259,BETY=9.36875287;
CONSTRAINT,RANGE=BPM51,BETX=1.70901781,BETY=11.48993188;
CONSTRAINT,RANGE=BPM52,BETX=2.43799536,BETY=12.63662526;
CONSTRAINT,RANGE=BPM53,BETX=2.6191734,BETY=11.47219511;
CONSTRAINT,RANGE=BPM54,BETX=1.21675166,BETY=9.86776126;
GLOBAL,Q1=9.14;
GLOBAL,Q2=3.26;
VARY,NAME=QQ1->K1,STEP=1E-6;
VARY,NAME=QQ2->K1,STEP=1E-6;
VARY,NAME=QQ3->K1,STEP=1E-6;
VARY,NAME=QQ4->K1,STEP=1E-6;
VARY,NAME=QQ5->K1,STEP=1E-6;
VARY,NAME=QQ6->K1,STEP=1E-6;
VARY,NAME=QQ7->K1,STEP=1E-6;
VARY,NAME=QQ8->K1,STEP=1E-6;
VARY,NAME=QQ9->K1,STEP=1E-6;
VARY,NAME=QQ10->K1,STEP=1E-6;
VARY,NAME=QQ11->K1,STEP=1E-6;
VARY,NAME=QQ12->K1,STEP=1E-6;
VARY,NAME=QQ13->K1,STEP=1E-6;
VARY,NAME=QQ14->K1,STEP=1E-6;
VARY,NAME=QQ15->K1,STEP=1E-6;
VARY,NAME=QQ16->K1,STEP=1E-6;
VARY,NAME=QQ17->K1,STEP=1E-6;
VARY,NAME=QQ22->K1,STEP=1E-6;
VARY,NAME=QQ23->K1,STEP=1E-6;
VARY,NAME=QQ24->K1,STEP=1E-6;
VARY,NAME=QQ25->K1,STEP=1E-6;
VARY,NAME=QQ26->K1,STEP=1E-6;
VARY,NAME=QQ27->K1,STEP=1E-6;
VARY,NAME=QQ28->K1,STEP=1E-6;
VARY,NAME=QQ29->K1,STEP=1E-6;
VARY,NAME=QQ30->K1,STEP=1E-6;
VARY,NAME=QQ31->K1,STEP=1E-6;
VARY,NAME=QQ32->K1,STEP=1E-6;
VARY,NAME=QQ33->K1,STEP=1E-6;
VARY,NAME=QQ34->K1,STEP=1E-6;
VARY,NAME=QQ35->K1,STEP=1E-6;
VARY,NAME=QQ36->K1,STEP=1E-6;
VARY,NAME=QQ37->K1,STEP=1E-6;
VARY,NAME=QQ38->K1,STEP=1E-6;
VARY,NAME=QQ40->K1,STEP=1E-6;
VARY,NAME=QQ41->K1,STEP=1E-6;
VARY,NAME=QQ42->K1,STEP=1E-6;
VARY,NAME=QQ43->K1,STEP=1E-6;
VARY,NAME=QQ44->K1,STEP=1E-6;
VARY,NAME=QQ45->K1,STEP=1E-6;
VARY,NAME=QQ46->K1,STEP=1E-6;
VARY,NAME=QQ47->K1,STEP=1E-6;
VARY,NAME=QQ48->K1,STEP=1E-6;
VARY,NAME=QQ49->K1,STEP=1E-6;
VARY,NAME=QQ50->K1,STEP=1E-6;
VARY,NAME=QQ51->K1,STEP=1E-6;
VARY,NAME=QQ52->K1,STEP=1E-6;
VARY,NAME=QQ53->K1,STEP=1E-6;
VARY,NAME=QQ54->K1,STEP=1E-6;
VARY,NAME=QQ55->K1,STEP=1E-6;
VARY,NAME=QQ56->K1,STEP=1E-6;
VARY,NAME=QQ57->K1,STEP=1E-6;
VARY,NAME=QQ58->K1,STEP=1E-6;
VARY,NAME=QQ59->K1,STEP=1E-6;
VARY,NAME=QQ60->K1,STEP=1E-6;
VARY,NAME=QQ61->K1,STEP=1E-6;
VARY,NAME=QQ62->K1,STEP=1E-6;
VARY,NAME=QQ63->K1,STEP=1E-6;
VARY,NAME=QQ64->K1,STEP=1E-6;
VARY,NAME=QQ65->K1,STEP=1E-6;
VARY,NAME=QQ66->K1,STEP=1E-6;
VARY,NAME=QQ67->K1,STEP=1E-6;
VARY,NAME=QQ68->K1,STEP=1E-6;
VARY,NAME=QQ69->K1,STEP=1E-6;
VARY,NAME=QQ70->K1,STEP=1E-6;
VARY,NAME=QQ71->K1,STEP=1E-6;
VARY,NAME=QQ72->K1,STEP=1E-6;
VARY,NAME=QQ73->K1,STEP=1E-6;
VARY,NAME=QQ74->K1,STEP=1E-6;
VARY,NAME=QQ75->K1,STEP=1E-6;
VARY,NAME=QQ76->K1,STEP=1E-6;
VARY,NAME=QQ77->K1,STEP=1E-6;
MIGRAD,CALLS=100000,STRATEGY=2;
ENDMATCH;

SELECT,FLAG=SECTORMAP,clear;
SELECT,FLAG=TWISS,CLASS=MARKER,column=name,s,betx,bety;
TWISS,SAVE,file=optics_2.dAT,sectormap;
SETPLOT,POST=1;
PLOT,COLOUR=100,HAXIS=S,VAXIS=BETX,BETY,INTERPOLATE=TRUE;


